<div class="container w-100 min-vh-100">
  <mat-horizontal-stepper class="min-vh-100" [linear]="true" #stepper>
    <mat-step [stepControl]="myForm" label="Informations personnels">
      <form [formGroup]="myForm" >
        <div class="row mt-5 m-auto">
          <mat-form-field class="col-3" >
            <input matInput placeholder="nom" formControlName="firstName">
            <mat-error *ngIf="firstName.invalid && firstName.touched">
              le nom est obligatoire
            </mat-error>
          </mat-form-field>
          <mat-form-field class="col-3">
            <input matInput placeholder="prénom" formControlName="lastName">
            <mat-error *ngIf="lastName.invalid && lastName.touched">
              le prénom est obligatoire
            </mat-error>
          </mat-form-field>
          <mat-form-field class="col-3">
            <input type="email" matInput placeholder="email" formControlName="email">
            <mat-hint >
              l'adresse mail doit être sous la forme <b>nom@example.com</b>
            </mat-hint>
            <mat-error *ngIf="email.invalid && email.touched && email.value.length > 0">
              adresse mail invalid
            </mat-error>

            <mat-error *ngIf="email.touched && email.value.length == 0">
              adresse mail obligatoire
            </mat-error>
          </mat-form-field>
          <mat-form-field class="col-3">
            <input type="tel" matInput placeholder="téléphone" formControlName="telephone">
            <mat-error *ngIf="telephone.invalid && telephone.touched">
              num est obligatoire
            </mat-error>
          </mat-form-field>
        </div>

        <div class="row mt-5 m-auto">
          <div class="col-4 ">
            <mat-form-field class="w-100" appearance="outline">
              <mat-label>Poste</mat-label>
              <mat-select formControlName="poste" >
                <mat-option [value]="'B1'">B1</mat-option>
                <mat-option [value]="'B3'">H1</mat-option>
                <mat-option [value]="'B2'">BC</mat-option>
              </mat-select>
              <mat-error *ngIf="poste.invalid && poste.touched">Champ obligatoire</mat-error>
            </mat-form-field>
          </div>

          <div class="col-4">
            <mat-form-field class="w-100" appearance="fill">
              <mat-label>date de naissance</mat-label>
              <input matInput formControlName="dateNaissance" [matDatepicker]="picker">
              <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
              <mat-datepicker #picker></mat-datepicker>
              <mat-hint><strong>jj/mm/aaaa</strong></mat-hint>
              <mat-error *ngIf="dateNaissance.invalid && dateNaissance.touched">
                cette date est invalide, il doit respecter cette forme <strong>"jj/mm/aaaa"</strong>
              </mat-error>
            </mat-form-field>
          </div>

          <div class="col-4">
            <mat-form-field class="w-100" appearance="fill">
              <mat-label>date d'embauche</mat-label>
              <input  matInput formControlName="dateEmbauche" [matDatepicker]="picker1">
              <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
              <mat-datepicker #picker1></mat-datepicker>
              <mat-hint><strong>jj/mm/aaaa</strong></mat-hint>
              <mat-error *ngIf="dateEmbauche.invalid && dateEmbauche.touched">
                cette date est invalide, il doit respecter cette forme <strong>"jj/mm/aaaa"</strong>
              </mat-error>
            </mat-form-field>
          </div>
        </div>

        <div class="container w-100 m-auto mt-lg-5">
          <button mat-raised-button color="warn" routerLink="/dashboard-Enterprise/MesSessions">Annuler</button>
          <button mat-raised-button class="float-end"  color="primary" [disabled]="myForm.invalid" matStepperNext>Suivant</button>
        </div>
      </form>
    </mat-step>

    <mat-step [stepControl]="habForm" label="Parametres d'habilitations">
      <form [formGroup]="habForm">
        <div class="container" >
          <mat-expansion-panel   [expanded]="true">
            <mat-expansion-panel-header>
              <mat-panel-title class="w-100">Parametres Générales</mat-panel-title>
            </mat-expansion-panel-header>
            <div class="row w-100 pb-5">
              <div class="col-lg-6 col-sm-12 ">
                <mat-form-field class="w-100" appearance="outline">
                  <mat-label>Niveau</mat-label>
                  <mat-select matNativeControl formControlName="level" required>
                    <mat-option *ngFor="let level of levels" [value]="level.habilitationLevel">
                      {{level.habilitationLevel}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div class="col-lg-6 col-sm-12 ">
                <mat-form-field class="w-100" appearance="outline">
                  <mat-label>Type</mat-label>
                  <mat-select matNativeControl formControlName="type" required>
                    <mat-option [value]="true">initial</mat-option>
                    <mat-option [value]="false">recyclage</mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
            </div>
          </mat-expansion-panel>
          <mat-expansion-panel  >
            <mat-expansion-panel-header>
              <mat-panel-title class="w-100">
                Parametres Avancées
              </mat-panel-title>
            </mat-expansion-panel-header>
           <!-- <div class="row w-100 pb-5">
              <div class = "col-6 mt-3">
                <mat-form-field  class="w-100">
                  <input type="number" matInput placeholder="temp de teste" formControlName="time">
                  <span matSuffix>min</span>
                  <mat-error *ngIf="time.invalid && time.touched">
                    merci d'entrer le temp
                  </mat-error>
                  <mat-hint>5-15 min</mat-hint>
                </mat-form-field>
              </div>
              <div class="col-6 mt-3">
                <mat-form-field  class="w-100">
                  <input type="number" matInput placeholder="seuil de validation" formControlName="admissionBarrier">
                  <span matSuffix>%</span>
                  <mat-error *ngIf="admissionBarrier.invalid && admissionBarrier.touched">
                    seuil invalide
                  </mat-error>
                  <mat-hint>0-100%</mat-hint>
                </mat-form-field>
              </div>
              <div class="col-6 mt-3">
                <mat-form-field class="w-100" >
                  <input type="number" matInput placeholder="Nombre de questions" formControlName="numberOfQuestions">
                  <mat-error *ngIf="numberOfQuestions.invalid && numberOfQuestions.touched">
                    le nombre de questions invalid
                  </mat-error>
                  <mat-hint>5-20</mat-hint>
                </mat-form-field>
              </div>
            </div>-->
          </mat-expansion-panel>
        </div>
        <div class="container w-100 m-auto mt-lg-5 justify-content-end">
          <button mat-button routerLink="/dashboard-Enterprise/MesSessions">Annuler</button>
          <button mat-raised-button  class="float-end me-2" color="primary" [disabled]="habForm.invalid" (click)="onInvite()" matStepperNext>Inviter</button>
          <button mat-raised-button class="float-end me-2" color="primary"  matStepperPrevious>Précedant</button>
        </div>
      </form>
    </mat-step>


  </mat-horizontal-stepper>
</div>
